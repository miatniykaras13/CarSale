syntax = "proto3";

option csharp_namespace = "FileManagement.Grpc";


package file_manager;

service FileManager {
    // File CRUD Operations
    rpc UploadSmallFile (UploadSmallFileRequest) returns (UploadSmallFileResponse);
    rpc UploadLargeFile (stream UploadLargeFileRequest) returns (UploadLargeFileResponse);
    rpc GetDownloadLink (GetDownloadLinkRequest) returns (GetDownloadLinkResponse);
    rpc DeleteFile (DeleteRequest) returns (DeleteResponse);
}

message UploadSmallFileRequest {
    bytes file = 1;
    string sourceService = 2;
    string contentType = 3;
    string fileName = 4;
    int64 fileSize = 5;
}

message UploadSmallFileResponse {
    string fileId = 1;
}

message UploadLargeFileRequest {
    bytes chunk = 1;
    string sourceService = 2;
    string contentType = 3;
    string fileName = 4;
    int64 fileSize = 5;
}

message UploadLargeFileResponse {
    string fileId = 1;
}

message GetDownloadLinkRequest {
    string fileId = 1;
    string sourceService = 2;
    int32 expirySeconds = 3;
}

message GetDownloadLinkResponse {
    string link = 1;
}

message DeleteRequest {
    string fileId = 1;
    string sourceService = 2;
}

message DeleteResponse {
    bool isSuccess = 1;
}